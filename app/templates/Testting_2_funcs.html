<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Select Athlete</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.css"
    />
    <link rel="stylesheet" href="../static/css/athlete-datatable.css" />
  </head>
  <body>
    <header>
      <h1 class="title">Sports Performance Pro</h1>
    </header>

    <table id="athleteTable" class="display">
      <thead>
        <tr>
          <th>Name</th>
          <th>Sports</th>
          <th>Institute</th>
        </tr>
      </thead>
      <tbody>
        <!-- Dynamic data will be inserted here -->
      </tbody>
    </table>

    <footer>
      <div class="footer">2023 Sports Performance Pro</div>
    </footer>
    <script
      type="text/javascript"
      charset="utf8"
      src="https://code.jquery.com/jquery-3.5.1.js"
    ></script>
    <script
      type="text/javascript"
      charset="utf8"
      src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.js"
    ></script>
    <script>
      $(document).ready(function () {
        dataTableExercise = $("#athleteTable").DataTable();
        dataTableExercise.on("mouseenter", "td", function () {
          let colIdx = dataTableExercise.cell(this).index().column;
          dataTableExercise
            .cells()
            .nodes()
            .each((el) => el.classList.remove("highlight"));
          dataTableExercise
            .column(colIdx)
            .nodes()
            .each((el) => el.classList.add("highlight"));
        });
      });

      var dataTableExercise;
      let i = 0;
      function addMultipleRows(count) {
        console.log("Adding Multiple now");
        if (!dataTableExercise) {
          dataTableExercise = $("#athleteTable").DataTable();
        }

        // You can add multiple rows here using your existing code
        for (let i = 0; i < count; i++) {
          var newRowData = [`Multiple - ${i}`];
          dataTableExercise.row.add(newRowData);
        }

        dataTableExercise.draw();
      }

      function addSingleRow() {
        i = i + 1;
        console.log(`Adding Single now ${i}`);
        if (!dataTableExercise) {
          dataTableExercise = $("#athleteTable").DataTable();
        }

        // Check if the current page is full
        var currentPageLength =
          dataTableExercise.page.info().end -
          dataTableExercise.page.info().start +
          1;
        // if (currentPageLength >= dataTableExercise.page.len()) {
        //   // Switch to the next page
        //   dataTableExercise.page("next").draw("page");
        // }

        var newRowData = [`Single ${i}`];
        dataTableExercise.row.add(newRowData);
      }

      addMultipleRows(5);

      addSingleRow();

      addSingleRow();

      addSingleRow();
      addSingleRow();
      addSingleRow();
      addSingleRow();
      addSingleRow();
    </script>
  </body>
</html>
